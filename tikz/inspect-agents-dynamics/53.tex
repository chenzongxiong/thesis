% https://olivierpieters.be/blog/2015/10/23/latex-plotting-from-file

\documentclass[border=10pt]{standalone}
\usepackage{pgfplots}
% \usepackage{filecontents}
\usepgfplotslibrary{groupplots}
\usepackage{pgfplotstable}
% \usepackage{pgfplotstable} % <-- required in preamble
\usepackage{booktabs}      % <-- required in preamble
\usepackage{tikz}
\usepackage{xstring}
\usepackage{catchfile}

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat=1.16}

 \pgfplotstableread[col sep=comma]{guess-53.csv}\mydata
\pgfplotstableread[col sep=comma]{1552-fake-detail.csv}\fakemydata
\pgfplotstableread[col sep=comma]{1552-true-detail.csv}\truemydata


\pgfplotsset{select coords between index/.style 2 args={
    x filter/.code={
        \ifnum\coordindex<#1\def\pgfmathresult{}\fi
        \ifnum\coordindex>#2\def\pgfmathresult{}\fi
    }
}}

\begin{document}


\begin{tikzpicture}

    \begin{axis}[
        height=10cm,width=20cm,
        axis y line*=left,
        xmin=-0.018,xmax=0.184,
        % xmin=10,xmax=1000,
        % ylabel={inputs},
        % xlabel={time steps, $n$}
        xticklabel style={font=\tiny, /pgf/number format/fixed}
    ]{
        \addplot+[color=blue,mark=.,scatter] table[x index={0}, y index={1}]{\truemydata};
        \label{true};
        \addplot+[color=orange,mark=.,scatter] table[x index={0}, y index={1}]{\fakemydata};
        \label{fake};
    }
    \end{axis}

    \begin{axis}[
        height=10cm,width=20cm,
        axis y line*=right,
        ytick pos=right,
        ylabel near ticks,
        xmin=-0.018,xmax=0.184,
        % ylabel={outputs},
        % xmin=10,xmax=1000,
        xticklabel style={font=\tiny, /pgf/number format/fixed},
        legend pos=north east,
    ]{
        % \addlegendimage{/pgfplots/refstyle=inputs}\addlegendentry{D-inputs}
% ,select coords between index={0}{100}

      % \addlegendimage{/pgfplots/refstyle=fake}\addlegendentry{dynamics generated by market model II}
      % \addlegendimage{/pgfplots/refstyle=true}\addlegendentry{dynamics generated by market model I}

      \addlegendimage{/pgfplots/refstyle=true}\addlegendentry{dynamics generated by actual scenario}
      \addlegendimage{/pgfplots/refstyle=fake}\addlegendentry{dynamics generated by potential scenario}


      \addplot+[color=red,scatter, mark=*,mark size=0.7pt,
      select coords between index={0}{1000}, mark color=blue,only marks,
      colormap={summap}{
        % color=(black)
        % color=(violet)
        color=(red)
        color=(red)
           }
          ] table[x index={0}, y index={1}]{\mydata};
          \addlegendentry{dynamics generated by HNN}
          
         \draw [ line width=1.5pt, color=black] (-0.018,-570) -- (0.184,-570);
         \draw [ line width=1.5pt, color=red] (-0.018,-590) -- (0.184,-590);
    }\end{axis}
\end{tikzpicture}

\end{document}
