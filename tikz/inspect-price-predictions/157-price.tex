% https://olivierpieters.be/blog/2015/10/23/latex-plotting-from-file

\documentclass[border=10pt]{standalone}
\usepackage{pgfplots}
% \usepackage{filecontents}
\usepgfplotslibrary{groupplots}
\usepackage{pgfplotstable}
% \usepackage{pgfplotstable} % <-- required in preamble
\usepackage{booktabs}      % <-- required in preamble
\usepackage{tikz}
\usepackage{xstring}
\usepackage{catchfile}

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat=1.16}

\pgfplotstableread[col sep=comma]{guess-hnn-157.csv}\mydata
% \pgfplotstableread[col sep=comma]{1456-fake-detail.csv}\fakemydata
% \pgfplotstableread[col sep=comma]{1456-true-detail.csv}\truemydata

\pgfplotsset{select coords between index/.style 2 args={
    x filter/.code={
        \ifnum\coordindex<#1\def\pgfmathresult{}\fi
        \ifnum\coordindex>#2\def\pgfmathresult{}\fi
    }
}}

\begin{document}


\begin{tikzpicture}

    \begin{axis}[
        height=10cm,width=20cm,
        % axis y line*=left,
        xmin=0,xmax=100,
        ylabel={price},
        xlabel={time steps, $n$},
        yticklabel style={/pgf/number format/fixed},
        legend pos=outer north east
    ]{
        \addplot+[color=blue,mark=*] table[x index={0}, y index={2}]{\mydata}; % ground-truth
        \addplot+[color=red,mark=*] table[x index={0}, y index={3}]{\mydata}; % lstm
        \addplot+[color=green,mark=*] table[x index={0}, y index={4}]{\mydata}; % hnn
        \addplot+[color=green!50,mark=*] table[x index={0}, y index={1}]{\mydata}; % hnn
           \addlegendentry{ground-truth price}
           \addlegendentry{LSTM}
           \addlegendentry{HNN}
    }
    \end{axis}

%     \begin{axis}[
%         height=10cm,width=20cm,
%         axis y line*=right,
%         ytick pos=right,
%         ylabel near ticks,
%         xmin=-0.003,xmax=0.165,
%         % ylabel={outputs},
%         % xmin=10,xmax=1000,
%         xticklabel style={font=\tiny, /pgf/number format/fixed},
%         legend pos=north west,
%     ]{
%         % \addlegendimage{/pgfplots/refstyle=inputs}\addlegendentry{D-inputs}
% % ,select coords between index={0}{100}
%       \addlegendimage{/pgfplots/refstyle=true}\addlegendentry{dynamics generated by market model I}
%       \addlegendimage{/pgfplots/refstyle=fake}\addlegendentry{dynamics generated by market model II}

%     %   \addplot+[color=red,scatter, mark=*,mark size=0.7pt,
%     %   select coords between index={0}{1000}, mark color=blue,only marks,
%     %   colormap={summap}{
%     %     % color=(black)
%     %     % color=(violet)
%     %     % color=(orange)
%     %     color=(red)
%     %       }
%     %       ] table[x index={0}, y index={1}]{\mydata};
%           \addlegendentry{dynamics generated by HNN}
%     }\end{axis}
\end{tikzpicture}

\end{document}
