% https://olivierpieters.be/blog/2015/10/23/latex-plotting-from-file

% \documentclass[border=10pt]{standalone}
% \usepackage{pgfplots}
% % \usepackage{filecontents}
% \usepgfplotslibrary{groupplots}
% \usepackage{pgfplotstable}
% % \usepackage{pgfplotstable} % <-- required in preamble
% \usepackage{booktabs}      % <-- required in preamble
% \usepackage{tikz}
% \usepackage{xstring}
% \usepackage{catchfile}
\documentclass[border=10pt]{standalone}
\usepackage{pgfplots}
% \usepackage{filecontents}
\usepgfplotslibrary{groupplots}
\usepackage{pgfplotstable}
% \usepackage{pgfplotstable} % <-- required in preamble
\usepackage{booktabs}      % <-- required in preamble
\usepackage{tikz}
\usepackage{xstring}
\usepackage{catchfile}
\usepgfplotslibrary{fillbetween}

\pgfplotstableread[col sep=comma]{lstm-stock-diff-outputs-units-128.csv}\mydata

\begin{document}

\begin{tikzpicture}
\begin{axis}[
    % group style = {group size = 1 by 1},
    height=12cm, width=24cm,
    % title={LSTM},
     % 
     % horizontal sep=2cm, 
     % vertical sep=5cm
    % xticklabels from table = {\Data}{Day}, xtick = {1,...,19},
    % xticklabel style = {rotate = 90, xshift = -0.8ex, anchor = mid east}
    ylabel=outputs,
    xmin=0,xmax=400, xlabel={time step, $n$}
    ]
    %% training sets
    % \nextgroupplot[ylabel=outputs,xmin=300,xmax=350,xlabel={time step, $n$}]
    
    % \addplot+[color=blue!40,mark=.,name path=lower] table[x index={0}, y index={22}]{\mydata}; % lower
    % \addplot+[color=blue!40,mark=., name path=higher] table[x index={0}, y index={23}]{\mydata}; % high
    
    % \addplot+[color=blue!40,mark=., name path=higher] table[x index={0}, y index={24}]{\mydata}; % average
    \addplot[color=red,mark=.] table[x index={0}, y index={1}]{\mydata}; % ground truth

    \addplot+[color=blue,mark=., name path=higher] table[x index={0}, y index={16}]{\mydata}; 
    
   % \addplot[blue!40] fill between[of=lower and higher];
    \addlegendentry{$b_n - b_{n-1}$ of ground truth}
    \addlegendentry{$b_n - b_{n-1}$ of LSTM predictions}
    
\end{axis}
\end{tikzpicture}
\end{document}

