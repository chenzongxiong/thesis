% https://olivierpieters.be/blog/2015/10/23/latex-plotting-from-file
% https://tex.stackexchange.com/questions/42697/pgfplots-legends-in-multiple-y-axis-plot-overlapping/42752
% https://tex.stackexchange.com/questions/198997/pgfplots-two-y-axis-with-three-plots-and-one-legend
% https://tex.stackexchange.com/questions/375969/pgfplots-two-ordinates-y-axis-or-multiple-axes-use-ylabel-as-legend
\documentclass[border=10pt]{standalone}
\usepackage{pgfplots}
% \usepackage{filecontents}
% \usepgfplotslibrary{groupplots}
\usepackage{pgfplotstable}
% \usepackage{pgfplotstable} % <-- required in preamble
\usepackage{booktabs}      % <-- required in preamble
\usepackage{tikz}
\usepackage{xstring}
\usepackage{catchfile}
    % UNITS
\usepackage{siunitx}
\sisetup{per=slash, load=abbr}
\pgfplotstableread[col sep=comma]{market-hnn-lstm-bn-predictions.csv}\mydata
\begin{document}


\begin{tikzpicture}
\pgfplotsset{set layers}

\begin{axis}[    
    % group style = {group size = 1 by 4},
    scale only axis,
     height=5cm, width=20cm,
     xmin=1300, xmax=1700,
     legend pos=north west,
     xlabel=\large{time steps, n},
     axis y line*=left,
      ylabel=\large{$b_n$},
    ]
    \addplot[color=blue,mark=.,thick] table[x index={0}, y index={2}]{\mydata}; % ground truth
    \label{plot:ground-truth};

\end{axis}
\begin{axis}[    
    % group style = {group size = 1 by 4},
    scale only axis,
     height=5cm, width=20cm,
     xmin=1300, xmax=1700,
     ymax=1100,
     legend pos=north west,
     xlabel=\large{time steps, n},
     axis y line*=right,
     axis x line*=none,
     % ylabel=\large{predictions}
    ]
    \addlegendimage{/pgfplots/refstyle=plot:ground-truth}\addlegendentry{ground truth};

    % \addplot[color=blue,mark=.,thick] table[x index={0}, y index={2}]{\mydata}; % ground truth
    \addplot[color=red,dashed, mark=.,thick] table[x index={0}, y index={3}]{\mydata};
    \label{pgfplots:lstm}

    % lstm results
    % \addplot[color=green,dashdotted, mark=.,thick] table[x index={0}, y index={4}]{\mydata}; % hnn results
    % \addlegendentry{ground truth}
    % \addlegendentry{ground truth}
    \addlegendentry{LSTM predictions}
    % \addlegendentry{HNN predictions}
\end{axis}
\end{tikzpicture}
\end{document}